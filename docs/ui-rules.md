# UI规则

## 1. 设计原则

### 1.1 简洁性

- **去除冗余**：只保留必要的元素，避免不必要的装饰
- **清晰的层次结构**：使用视觉层次结构引导用户注意力
- **简单的交互**：交互流程应简单明了，避免复杂的操作

### 1.2 可访问性

- **遵循WCAG标准**：确保网站符合WCAG 2.1 AA级标准
- **键盘导航**：支持键盘导航，确保所有功能可通过键盘访问
- **屏幕阅读器支持**：使用语义化HTML，确保屏幕阅读器可正确解读内容
- **颜色对比度**：确保文本和背景的颜色对比度符合标准
- **字体大小**：提供合适的字体大小，支持用户调整字体大小

### 1.3 一致性

- **视觉一致性**：组件间保持一致的视觉风格，包括颜色、字体、间距等
- **交互一致性**：相同类型的组件应具有相同的交互方式
- **术语一致性**：使用一致的术语和标签

### 1.4 可定制性

- **主题支持**：提供亮色/暗色主题切换
- **响应式设计**：适应不同屏幕尺寸
- **灵活的组件**：组件应支持自定义配置，以适应不同场景

### 1.5 性能优化

- **减少资源消耗**：优化图片、字体等资源，减少加载时间
- **避免不必要的动画**：只在必要时使用动画，避免过度使用
- **优化渲染性能**：减少组件重渲染，提高页面响应速度

## 2. 主题支持

### 2.1 主题类型

项目支持两种主题模式：

- **亮色主题**：适合在明亮环境下使用
- **暗色主题**：适合在昏暗环境下使用，减少眼睛疲劳

### 2.2 主题切换

主题切换功能应满足以下要求：

- 支持手动切换主题
- 支持根据系统设置自动切换主题
- 主题切换应平滑过渡，不影响用户体验
- 主题设置应持久化保存

### 2.3 主题实现

项目使用Tailwind CSS的`dark`类实现主题切换：

```typescript
'use client';

import { useEffect, useState } from 'react';

export default function ThemeToggle() {
  const [isDark, setIsDark] = useState(false);

  useEffect(() => {
    // 从localStorage获取主题设置
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');
    
    if (initialTheme === 'dark') {
      document.documentElement.classList.add('dark');
      setIsDark(true);
    }
  }, []);

  const toggleTheme = () => {
    if (isDark) {
      document.documentElement.classList.remove('dark');
      localStorage.setItem('theme', 'light');
    } else {
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
    }
    setIsDark(!isDark);
  };

  return (
    <button
      className="p-2 rounded-md bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"
      onClick={toggleTheme}
      aria-label="切换主题"
    >
      {isDark ? '🌞' : '🌙'}
    </button>
  );
}
```

### 2.4 主题色板

项目使用以下主题色板：

#### 亮色主题

| 颜色 | 用途 | Tailwind CSS类 |
|------|------|----------------|
| 主色 | 按钮、链接、强调元素 | bg-blue-600, text-blue-600 |
| 辅助色 | 次要按钮、提示信息 | bg-green-500, text-green-500 |
| 警告色 | 警告信息、错误提示 | bg-yellow-500, text-yellow-500 |
| 错误色 | 错误信息、危险操作 | bg-red-500, text-red-500 |
| 背景色 | 页面背景 | bg-white |
| 卡片背景 | 卡片、面板背景 | bg-gray-50 |
| 文本色 | 主要文本 | text-gray-900 |
| 次要文本 | 次要文本 | text-gray-600 |
| 边框色 | 边框、分隔线 | border-gray-200 |

#### 暗色主题

| 颜色 | 用途 | Tailwind CSS类 |
|------|------|----------------|
| 主色 | 按钮、链接、强调元素 | bg-blue-400, text-blue-400 |
| 辅助色 | 次要按钮、提示信息 | bg-green-400, text-green-400 |
| 警告色 | 警告信息、错误提示 | bg-yellow-400, text-yellow-400 |
| 错误色 | 错误信息、危险操作 | bg-red-400, text-red-400 |
| 背景色 | 页面背景 | bg-gray-900 |
| 卡片背景 | 卡片、面板背景 | bg-gray-800 |
| 文本色 | 主要文本 | text-gray-100 |
| 次要文本 | 次要文本 | text-gray-400 |
| 边框色 | 边框、分隔线 | border-gray-700 |

## 3. 组件库规范

### 3.1 组件库选择

项目UI组件优先使用Radix UI，并结合SCSS进行样式开发。

### 3.2 组件开发规范

#### 3.2.1 组件分类

- **原子组件**：最基础的组件，如按钮、输入框、标签等
- **分子组件**：由多个原子组件组成，如表单、卡片、导航栏等
- **组织组件**：由多个分子组件组成，如页面布局、模态框等

#### 3.2.2 组件命名规范

- 组件名称应使用PascalCase
- 组件目录名称应与组件名称一致
- 组件文件名称应与组件名称一致
- 组件Props接口应使用`Props`后缀命名

#### 3.2.3 组件结构

每个组件应包含以下文件：

- `组件名.tsx`：组件实现
- `组件名.test.tsx`：组件测试
- `index.ts`：组件导出

#### 3.2.4 组件Props设计

- Props应具有清晰的类型定义
- 可选Props应使用`?`标记
- Props应提供合理的默认值
- Props名称应简洁明了，避免缩写
- 事件Props应使用`on`前缀，如`onClick`、`onChange`

#### 3.2.5 组件样式设计

- 使用SCSS进行样式开发
- 组件样式应封装在组件内部
- 避免使用全局样式
- 支持主题切换
- 支持响应式设计
- 使用CSS变量管理主题色

#### 3.2.6 组件文档

每个组件应提供以下文档：

- **Storybook故事**：用于组件开发和演示
- **Props文档**：描述组件的Props、类型、默认值和用途
- **使用示例**：展示组件的常见使用方式
- **可访问性说明**：说明组件的可访问性特性

### 3.3 组件使用规范

- 优先使用项目内置组件，避免重复开发
- 组件使用应符合组件设计意图
- 组件配置应合理，避免过度自定义
- 组件应在适当的场景下使用

## 4. 响应式设计

### 4.1 断点设计

项目使用Tailwind CSS的默认断点：

| 断点 | 名称 | 尺寸 | 用途 |
|------|------|------|------|
| sm | 小屏幕 | 640px | 手机横屏 |
| md | 中等屏幕 | 768px | 平板 |
| lg | 大屏幕 | 1024px | 笔记本电脑 |
| xl | 超大屏幕 | 1280px | 桌面显示器 |
| 2xl | 特大屏幕 | 1536px | 大屏幕显示器 |

### 4.2 响应式布局

响应式布局应满足以下要求：

- 在不同屏幕尺寸下提供良好的用户体验
- 内容应自适应屏幕宽度
- 导航和菜单应根据屏幕尺寸调整
- 图片和媒体应自适应屏幕尺寸
- 交互元素应具有合适的大小，便于触摸操作

### 4.3 响应式设计实现

项目使用Tailwind CSS的响应式前缀实现响应式设计：

```jsx
<div className="flex flex-col md:flex-row gap-4">
  <div className="md:w-1/2">左侧内容</div>
  <div className="md:w-1/2">右侧内容</div>
</div>

<img
  src="/image.jpg"
  alt="示例图片"
  className="w-full h-auto md:w-1/2"
/>

<button className="px-4 py-2 text-sm md:text-base">按钮</button>
```

### 4.4 移动优先设计

项目采用移动优先的设计理念：

- 先设计移动端布局，再扩展到桌面端
- 优先考虑移动端用户体验
- 确保移动端功能完整，不遗漏重要功能
- 触摸目标应足够大，便于移动端操作

## 5. 排版规范

### 5.1 字体选择

- **主要字体**：使用无衬线字体，如Inter、Roboto等
- **辅助字体**：可根据需要使用其他字体，但应保持一致性
- **字体加载**：优化字体加载，减少FOIT（Flash of Invisible Text）

### 5.2 字体大小

项目使用以下字体大小规范：

| 用途 | 字体大小 | Tailwind CSS类 |
|------|----------|----------------|
| 标题1 | 3rem (48px) | text-4xl |
| 标题2 | 2.25rem (36px) | text-3xl |
| 标题3 | 1.875rem (30px) | text-2xl |
| 标题4 | 1.5rem (24px) | text-xl |
| 标题5 | 1.25rem (20px) | text-lg |
| 标题6 | 1.125rem (18px) | text-base |
| 正文 | 1rem (16px) | text-base |
| 辅助文本 | 0.875rem (14px) | text-sm |
| 说明文本 | 0.75rem (12px) | text-xs |

### 5.3 行高和字间距

- **行高**：正文行高应为1.6，标题行高应为1.2
- **字间距**：根据字体和大小调整字间距，确保可读性

### 5.4 文本颜色

- **主要文本**：使用主题色板中的主要文本颜色
- **次要文本**：使用主题色板中的次要文本颜色
- **强调文本**：使用主题色板中的主色
- **链接文本**：使用主题色板中的主色，并添加下划线或其他标识

## 6. 间距规范

### 6.1 间距单位

项目使用Tailwind CSS的间距单位，基于4px的倍数：

| 间距 | 像素 | Tailwind CSS类 |
|------|------|----------------|
| 0 | 0px | p-0, m-0 |
| 1 | 4px | p-1, m-1 |
| 2 | 8px | p-2, m-2 |
| 3 | 12px | p-3, m-3 |
| 4 | 16px | p-4, m-4 |
| 5 | 20px | p-5, m-5 |
| 6 | 24px | p-6, m-6 |
| 8 | 32px | p-8, m-8 |
| 10 | 40px | p-10, m-10 |
| 12 | 48px | p-12, m-12 |

### 6.2 间距使用规范

- 组件内部间距应一致
- 组件间间距应一致
- 页面不同区域的间距应保持一致的视觉节奏
- 间距应根据内容的重要性和关系进行调整

## 7. 图标规范

### 7.1 图标选择

- 使用统一的图标库，如Lucide Icons、Heroicons等
- 图标风格应一致，避免混合使用不同风格的图标
- 图标应具有清晰的含义，便于用户理解

### 7.2 图标大小

图标大小应根据使用场景进行调整：

| 场景 | 图标大小 | Tailwind CSS类 |
|------|----------|----------------|
| 按钮内图标 | 1rem (16px) | w-4 h-4 |
| 导航图标 | 1.25rem (20px) | w-5 h-5 |
| 卡片图标 | 1.5rem (24px) | w-6 h-6 |
| 页面图标 | 2rem (32px) | w-8 h-8 |

### 7.3 图标颜色

- 图标颜色应与周围文本颜色一致
- 交互式图标颜色应与主题色板中的主色一致
- 禁用状态的图标颜色应使用主题色板中的次要文本颜色

## 8. 动画和过渡

### 8.1 动画使用原则

- **必要性**：只在必要时使用动画，避免过度使用
- **目的性**：动画应具有明确的目的，如引导用户注意力、反馈用户操作等
- **一致性**：动画效果应保持一致，避免混合使用不同风格的动画
- **性能优化**：使用CSS动画或React Spring等高性能动画库，避免使用JavaScript动画
- **可访问性**：提供关闭动画的选项，适应不同用户需求

### 8.2 过渡效果

过渡效果应满足以下要求：

- 过渡时间应适当，避免过长或过短
- 过渡曲线应自然，避免生硬的过渡
- 过渡效果应一致，避免混合使用不同的过渡效果

### 8.3 常见动画场景

- **页面加载**：使用淡入或滑动动画，提高用户体验
- **组件出现/消失**：使用淡入淡出或滑动动画
- **状态变化**：使用颜色变化、缩放等动画反馈用户操作
- **导航切换**：使用滑动或淡入淡出动画，引导用户注意力
- **悬停效果**：使用颜色变化、缩放等动画，反馈用户操作

### 8.4 动画实现

项目使用Tailwind CSS的过渡和动画类实现动画效果：

```jsx
<div className="transition-all duration-300 hover:scale-105 hover:shadow-lg">
  卡片内容
</div>

<button className="transition-colors duration-200 hover:bg-blue-700">
  按钮
</button>

<div className="animate-pulse">加载中...</div>
```

## 9. 可访问性规范

### 9.1 语义化HTML

- 使用正确的HTML标签，如`<header>`, `<nav>`, `<main>`, `<footer>`等
- 为表单元素添加正确的标签
- 使用`<button>`元素实现按钮功能，避免使用`<div>`或`<span>`模拟按钮
- 使用`<a>`元素实现链接功能，避免使用其他元素模拟链接

### 9.2 ARIA属性

- 为无法使用语义化HTML的组件添加ARIA属性
- 使用ARIA角色和属性描述组件的状态和功能
- 确保ARIA属性的正确性和一致性

### 9.3 键盘导航

- 确保所有功能可通过键盘访问
- 提供清晰的键盘焦点指示
- 支持键盘快捷键，但不依赖键盘快捷键
- 遵循标准的键盘导航顺序

### 9.4 颜色对比度

- 文本和背景的颜色对比度应符合WCAG 2.1 AA级标准
- 主要文本的对比度至少为4.5:1
- 大文本（18pt或14pt粗体）的对比度至少为3:1
- 交互式元素的对比度至少为3:1

### 9.5 测试可访问性

- 使用可访问性测试工具，如axe、Lighthouse等
- 进行手动测试，模拟不同用户场景
- 听取用户反馈，持续改进可访问性

## 10. 后续步骤

- [组件库指南](component-library.md)：了解组件库的详细使用说明
- [测试指南](testing-guide.md)：了解项目的测试策略和方法
- [部署指南](deployment-guide.md)：了解项目的部署流程和配置
